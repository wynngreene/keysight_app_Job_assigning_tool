<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Daily Operations — Scan + Training Lookup</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="app.css">
</head>

<body class="bg-light">

  <!-- =========================
       TOP HEADER
  ========================= -->
  <header class="bg-dark text-white py-1 px-3 d-flex justify-content-between align-items-center small">
    <div class="fw-bold">Daily Operations Demo</div>
    <div>Made by the <span class="fw-bold text-warning">Moore | Greene</span> Team</div>
  </header>

  <!-- =========================
       DEMO BANNER
  ========================= -->
  <div class="bg-warning text-dark text-center py-1 small fw-semibold">
    DEMO VERSION — Not for Production Use
  </div>

  <div class="container py-4">

    <!-- TRAINING CSV UPLOAD -->
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title mb-2">Upload Training Sheet</h5>
        <p class="card-text mb-2">Upload the training CSV so the system knows which operators can build each part.</p>

        <div class="row g-3 align-items-center">
          <div class="col-sm-6 col-md-5 col-lg-4">
            <input type="file" id="csvInput" accept=".csv" class="form-control form-control-sm">
          </div>
        </div>

        <div id="loadStatus" class="mt-2 small"></div>

        <!-- GREEN READY BADGE -->
        <div id="readyBadge" class="mt-2 d-none">
          <span class="badge bg-success p-2 fs-6">✔ Ready to Scan Parts</span>
        </div>

      </div>
    </div>

    <!-- MAIN 3 CARDS -->
    <div class="row g-4">

      <!-- CARD 1: Scan Part -->
      <div class="col-12 col-md-4">
        <div class="card shadow-sm h-100">
          <div class="card-body">

            <h5 class="card-title">1. Scan Part</h5>
            <p class="card-text">Enter or scan a <strong>Part Number</strong>. Trained operators will appear in Card 2.</p>

            <div class="mb-3">
              <label class="form-label" for="scanInput">Scan Input</label>
              <input type="text" id="scanInput" class="form-control" placeholder="Scan or type part number">
            </div>

            <button class="btn btn-primary w-100 mb-3" onclick="processScan()">Submit Scan</button>

            <div id="scanResult" class="alert alert-secondary d-none"></div>

          </div>
        </div>
      </div>

      <!-- CARD 2 -->
      <div class="col-12 col-md-4">
        <div class="card shadow-sm h-100">
          <div class="card-body d-flex flex-column">

            <h5 class="card-title">2. Pick Operator & Assign Job</h5>
            <p class="card-text">After scanning, select a trained operator & assign the job number.</p>

            <div class="mb-2">
              <label class="form-label">Trained Operators</label>
              <select id="operatorSelect" class="form-select" disabled>
                <option value="">Upload training + scan a part</option>
              </select>
            </div>

            <div class="mb-2">
              <label class="form-label">Job Number</label>
              <input type="text" id="jobNumberInput" class="form-control" placeholder="Enter job number">
            </div>

            <button id="assignJobBtn" class="btn btn-success w-100 mb-2" onclick="assignJob()" disabled>
              Assign Job
            </button>

            <small id="operatorInfo" class="text-muted d-block mt-auto"></small>

          </div>
        </div>
      </div>

      <!-- CARD 3: Daily Log -->
      <div class="col-12 col-md-4">
        <div class="card shadow-sm h-100">
          <div class="card-body d-flex flex-column">

            <div class="d-flex justify-content-between align-items-center mb-2">
              <h5 class="card-title mb-0">3. Daily Log</h5>
              <small id="dailyLogDate" class="text-muted"></small>
            </div>

            <p class="card-text">Logs update automatically when assigning or editing jobs.</p>

            <div class="d-flex justify-content-between mb-3">
              <button class="btn btn-outline-secondary btn-sm" onclick="changeLogDay(-1)">◀ Prev</button>
              <button class="btn btn-outline-secondary btn-sm" onclick="changeLogDay(1)">Next ▶</button>
            </div>

            <div class="input-group mb-3">
              <input type="text" id="logSearchInput" class="form-control" placeholder="Search today's log…">
              <button class="btn btn-outline-primary" onclick="renderDailyLog()">Search</button>
            </div>

            <ul id="dailyLogList" class="list-group flex-grow-1 mb-0 log-list"></ul>

          </div>
        </div>
      </div>

    </div>

    <!-- JOB ASSIGNMENTS LISTS -->
    <div class="mt-4">

      <!-- ACTIVE JOBS -->
      <div class="card mb-4">
        <div class="card-body">

          <h5 class="card-title mb-2">Active Jobs</h5>
          <small class="text-muted">Assigned & In Progress</small>

          <div class="table-responsive mt-2">
            <table class="table table-sm table-striped">
              <thead class="table-light">
                <tr>
                  <th>Job #</th>
                  <th>Part #</th>
                  <th>Operator</th>
                  <th>Status</th>
                  <th>Time Assigned</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="activeJobsBody"></tbody>
            </table>
          </div>

          <div id="activeJobsPagination" class="mt-2"></div>

        </div>
      </div>

      <!-- COMPLETED JOBS -->
      <div class="card">
        <div class="card-body">

          <h5 class="card-title mb-2">Completed Jobs</h5>
          <small class="text-muted">Completed / Cancelled</small>

          <div class="table-responsive mt-2">
            <table class="table table-sm table-striped">
              <thead class="table-light">
                <tr>
                  <th>Job #</th>
                  <th>Part #</th>
                  <th>Operator</th>
                  <th>Status</th>
                  <th>Time Assigned</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="completedJobsBody"></tbody>
            </table>
          </div>

          <div id="completedJobsPagination" class="mt-2"></div>

        </div>
      </div>

    </div>

  </div>

  <!-- FOOTER -->
  <footer class="bg-light border-top py-2 text-center small mt-4">
    <div class="text-muted">
      © 2025 Moore | Greene Team — Demo Build v1.0
    </div>
  </footer>

  <!-- Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- PapaParse -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <!-- App Logic -->
  <script src="script.js"></script>

</body>

</html>

